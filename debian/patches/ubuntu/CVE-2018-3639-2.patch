From 6cf7cfef30a220709a13b987fc9aca0bd3d63110 Mon Sep 17 00:00:00 2001
From: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>
Date: Wed, 16 May 2018 21:37:31 -0400
Subject: [PATCH v3 2/5] i386: define the AMD 'virt-ssbd' CPUID feature bit
 (CVE-2018-3639)

AMD Zen expose the Intel equivalant to Speculative Store Bypass Disable
via the 0x80000008_EBX[25] CPUID feature bit.

This needs to be exposed to guest OS to allow them to protect
against CVE-2018-3639.

Signed-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>
---
v2: Wrong bit position.
---
 target/i386/cpu.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: qemu-2.11+dfsg/target/i386/cpu.c
===================================================================
--- qemu-2.11+dfsg.orig/target/i386/cpu.c	2018-05-18 14:06:21.995005774 -0400
+++ qemu-2.11+dfsg/target/i386/cpu.c	2018-05-18 14:06:21.991005779 -0400
@@ -490,7 +490,7 @@ static FeatureWordInfo feature_word_info
             "ibpb", NULL, NULL, NULL,
             NULL, NULL, NULL, NULL,
             NULL, NULL, NULL, NULL,
-            NULL, NULL, NULL, NULL,
+            NULL, "virt-ssbd", NULL, NULL,
             NULL, NULL, NULL, NULL,
         },
         .cpuid_eax = 0x80000008,
